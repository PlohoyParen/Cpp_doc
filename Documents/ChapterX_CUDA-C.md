# ChapterX: CUDA-C/C++
## Основы
В целом GPU нужны, чтобы быстро параллельно обрабатывать простые вычисления. Такие вычисления встречаются, например, при рендеринге. Мы рендерим фрейм сотни раз в секундку (60 frame это хорошо для игр, например). Каждый раз компьютер должен просчитать как и куда рансформируются точки (vertices) из которых состоят объекты в графике. Это просте вычисления, но их очень много. Так GPU делает простые вычисления параллельно. Сравнивая CPU и GPU получим у меня на ноуте (intel core i7 и GeForce960M) получим, что у CPU 4 гигогерцовых ядра, а у GPU 640 мегагерцовых ядер (для ноута mobile версия, для обычной GeForce960 - 1024 ядер). Отсюда, **GPU хорош для параллельных алгоритмов, а CPU для последовательных**.     

CUDA - это специальное API для видеокарт NVIDIA. Хотя синтаксис аналогичен C/C++ с небольшими добавлениями, под капотом он реализован на PTX языке (Parallel Thread Execution (PTX, or NVPTX) - это псевдо-ассемблер разработанный NVIDIA), который потом переводтся в в бинарный код для GPU. Надо понимать, что это CUDA - это не библиотека для С/С++ - это считай что отдельный язык, который называется CUDA-C/C++. Для его реализации нужен специальный компилятор NVCC (не входит в стандартные пакеты IDE), а файлы с кодом имеют расширение `.CU` (в VS можно выставить опцию, что .CU файлы автоматически ассоциировались с NVCC компилятором).     

### Термины
**Host** - это CPU. Host is in control of the system RAM, disks and other devises.       
**Device** - это GPU. It has its own RAM, and it can control only this RAM. It doesn't have access to system RAM, disks and other deivses.       
**Kernel** - так называют ф-ции написаные на CUDA языке, которая выпоняется на GPU. Каждый kernel может выполняться параллельно на 100- 1000 threads. На kernel накладываются следующие ограничения:     
  1. No recursive kernels
  2. kernels always return void
  3. They can't use system memory (?)
  4. Kernel can't have variable number of arguments
  
**Function qualifiers** - это приставки, которые пишутся перед ф-цией, чтобы компилятор понял, что это kernel. There are 3 function qualifiers (используется два черточки `__`, а не одна `_`):    
  1. `__global__` - called by host, runs on device (те вызывается, например, из main()).
  2. `__device__` - called by device, runs by device (вспомогательные ф-ции, которые вызываются из других kernel).
  3. `__host__` - normal host function (те device ее вообще не трогает. Все делается на CPU). На самом деле NVCC компилятор передает такие ф-ции напрямую обычному компилятору C, чтобы тот сам разбирался со своими CPU ф-циями.
